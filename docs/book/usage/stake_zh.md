# 质押和取消质押

在 Walrus 中，任何人都可以将质押委托给存储节点，通过这样做，影响未来 epoch 中哪些存储节点被选入委员会，以及这些节点将持有多少分片。分片在每个 epoch 分配给存储节点，大致与委托给它们的质押数量成正比。通过与存储节点质押，用户还能获得奖励，因为他们将获得存储费用的份额。

由于将分片从一个存储节点移动到另一个需要传输大量数据，并且存储节点可能需要扩展其存储容量，因此下一个 epoch 的委员会选择提前完成，在前一个 epoch 的中点。这为存储节点操作员提供了足够的时间来配置额外的资源（如果需要）。

要使质押影响 epoch `e` 中的分片分布并变为"活跃"，必须在为此 epoch 选择委员会之前进行质押，这意味着必须在 epoch `e - 1` 的中点之前进行质押。如果在该时间点之后进行质押，它只会影响 epoch `e + 1` 的委员会选择，因此只会在该 epoch 中变为活跃并获得奖励。

取消质押有类似的延迟：因为取消质押资金只对下一次委员会选择中的委员会产生影响，质押将保持活跃直到该委员会接管。这意味着，要在 epoch `e` 开始时取消质押，用户需要在 epoch `e - 1` 的中点之前"请求提取"。否则，即如果用户在此时间点之后取消质押，质押将在整个 epoch `e` 中保持活跃并继续获得奖励，余额和奖励将在 epoch `e + 1` 开始时可供提取。

## 如何使用 Walrus 质押 dApp

Walrus 质押 dApp 允许用户质押（或取消质押）到系统的任何存储节点。

要使用 dApp，请访问 <https://stake-wal.wal.app> 并连接您的钱包：

- 点击右上角的 `Connect Wallet` 按钮。
- 选择钱包（如果钱包之前已连接，则不需要这一步和下一步）。
- 批准连接。

### 将测试网 SUI 兑换为 WAL

要能够质押，您需要在钱包中拥有测试网 WAL。您可以使用 dApp 将测试网 SUI 兑换为 WAL，如下所示：

- 点击 `Get WAL` 按钮。
- 选择 SUI 数量。这将以 1:1 的汇率兑换为 WAL。
- 然后点击 `Exchange`。
- *按照钱包中的说明批准交易。*

### 质押

- 找到您想要质押的存储节点。
  - 在系统统计下方，有"当前委员会"存储节点列表。
  - 您可以选择该列表中的一个节点，或者如果存储节点不在当前委员会中，您可以在页面底部找到所有存储节点。
- 选择存储节点后，点击质押按钮。
- 选择 WAL 数量。
- 点击质押。
- *按照钱包中的说明批准交易。*

### 取消质押

- 找到您想要取消质押的 `Staked WAL`。
  - 在"当前委员会"列表下方，您将找到所有您的 `Staked WAL`。
  - 您还可以展开存储节点并找到您与该节点的所有质押。
- 根据 `Staked WAL` 的状态，您将能够取消质押或提取您的资金。
- 点击 `Unstake` 或 `Withdraw` 按钮。
- 点击继续确认您的操作。
- *按照钱包中的说明批准交易。*