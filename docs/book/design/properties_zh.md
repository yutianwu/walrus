# Walrus 保证和安全属性

以下属性在假设所有存储纪元中 2/3 的分片由忠实正确遵循 Walrus 协议的存储节点操作的前提下成立。

如[之前](./encoding_zh.md)所述，每个 blob 使用纠删码编码为 slivers，并加密派生 blob ID。对于给定的 blob ID，有一个**可用性点（PoA）**和一个**可用期**，可通过 Sui 链上的事件观察到。

以下属性与 PoA 相关：

- 在 PoA 之后，对于 blob ID，在可用期内执行读取的任何正确用户最终将终止并获得值 \(V\)，该值要么是 blob 内容 \(F\)，要么是 `None`。
- 在 PoA 之后，如果两个正确用户执行读取并分别获得 \(V\) 和 \(V'\)，则 \(V = V'\)。
- 具有适当存储资源的正确用户总是可以为具有 blob ID 的 blob \(F\) 执行存储并推进协议直到 PoA。
- 在 PoA 之后对由正确用户存储的 blob \(F\) 进行读取，将产生 \(F\)。

一些保证属性确保 Walrus 存储节点的正确内部流程。为了定义这些，**不一致性证明**证明 blob ID 由错误编码 blob 的用户存储。

- 在 PoA 之后，对于由正确用户存储的 blob ID，存储节点总是能够为此 blob ID 恢复其分片的正确 slivers。
- 在 PoA 之后，如果正确的存储节点无法恢复 sliver，它可以为 blob ID 产生不一致性证明。
- 如果 blob ID 由正确用户存储，则无法为其派生不一致性证明。
- 正确用户对可能存在不一致性证明的 blob ID 的读取返回 `None`。

请注意，没有删除操作，PoA 之后的 blob ID 将在整个可用期内可用。

```admonish tip title="经验法则"
在 PoA 之前，客户端有责任确保 blob 的可用性及其上传到 Walrus。在 PoA 之后，Walrus 作为系统有责任在其剩余的完整可用期内作为其操作的一部分维护 blob 的可用性。与 blob ID 的 PoA 对应的事件的发出证明其可用性。
```